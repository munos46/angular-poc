<sb-page title="CLIENT LIST">

  <p-messages [value]="msgsMainPage" [closable]="false"></p-messages>

  <mat-expansion-panel [expanded]="true">

    <mat-expansion-panel-header>
      Client form
    </mat-expansion-panel-header>

    <form class="example-form">
      <br>
      <mat-form-field>
        <input matInput placeholder="Firstname" name="firstName" (blur)="update($event.target.value)">
      </mat-form-field>
      <br>
      <mat-form-field>
        <input matInput placeholder="Lastname">
      </mat-form-field>
      <br>
      <button mat-raised-button color="primary" class="formButton" (click)="triggerSearch()">Search</button>
    </form>
  </mat-expansion-panel>


  <mat-expansion-panel [expanded]="expendedSearch" [disabled]="disabledSearch">
    <mat-expansion-panel-header>
      Search results
    </mat-expansion-panel-header>

    <p-messages [value]="msgsSearchResults" [closable]="false"></p-messages>

    <p-table [value]="clients" [reorderableColumns]="true" selectionMode="single" [(selection)]="clientSelected"
      [paginator]="true" [rows]="4">
      <ng-template pTemplate="header" let-columns>
        <tr>
          <th style="width:3.5em"></th>
          <th pReorderableColumn> Id </th>
          <th pReorderableColumn> FirstName </th>
          <th pReorderableColumn> LastName </th>
          <th pReorderableColumn> BirthDate </th>
          <th></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-client let-columns="columns" let-index="rowIndex">
        <tr [pReorderableRow]="index" (mouseover)="aff(client)" (mouseout)="nonAff(client)">
          <td>
            <mat-icon pReorderableRowHandle>reorder</mat-icon>
          </td>
          <td>{{client.id}}</td>
          <td>{{client.firstname}}</td>
          <td>{{client.lastname}}</td>
          <td>{{client.birthdate | date:'ww/MM/yyyy'}}</td>
          <td>
            <div *ngIf="client.affButton">
                <button mat-raised-button color="primary" class="formButton"><mat-icon>edit</mat-icon> Edit</button>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </mat-expansion-panel>
</sb-page>
